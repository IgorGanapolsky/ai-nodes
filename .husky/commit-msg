#!/usr/bin/env sh
. "$(dirname "$0")/_/h"

echo "üìù Validating commit message..."

# Check if commitlint is available
if ! pnpm -w exec commitlint --version >/dev/null 2>&1; then
  echo "‚ö†Ô∏è  commitlint not available, skipping commit message validation"
  exit 0
fi

# Run commitlint validation
if ! pnpm -w exec commitlint --edit "$1"; then
  echo "‚ùå Commit message validation failed"
  echo ""
  echo "üí° Commit message should follow conventional commits format:"
  echo "   <type>[optional scope]: <description>"
  echo ""
  echo "   Examples:"
  echo "   feat: add new user authentication"
  echo "   fix(api): resolve database connection issue"
  echo "   docs: update README with installation steps"
  echo "   refactor(core): simplify data processing logic"
  echo ""
  echo "   Types: feat, fix, docs, style, refactor, test, chore"
  exit 1
fi

echo "‚úÖ Commit message is valid!"

